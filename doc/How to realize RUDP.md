# Overview
如何实现可靠组播，其实现的本质在于，在应用层维护UDP连接。

## What problems need to be solved?
问题1：接收方如何判断数据包是否丢失

对于每一个packet都打上一个序列号，接收端发现序列号缺失，就可以判断数据包丢失了。以TCP与UDP进行对比分析：
TCP的协议报头包含序列号字段(Seq number)，而UDP的报头则不包含。

问题2：发送方如何确认数据包已经丢失？
主要分为两类方案，ACK(Acknowledgement 正向反馈)与NACK(Negative Acknowledge 负向反馈)

ACK是由发送方来判断接收方是否有缺失，发送的每一个包或者一组包接收方都需要回应ACK，配合重传超时来确认是否有缺失。

NACK是由接收方来确认是否有缺失，接收方会缓存数据并判断中间是否出现了缺失，如果发生了缺失则会返回NACK。

问题3：接收方如何确认数据包已经丢失？

简单的做法是发现数据包包含的序列号不连续就进行发送重传请求，但是由于UDP传输不但存在丢包的情况，而且也会发生乱序。
因此可以指定一段间隔时间发送一次NACK请求，一次性带上这段时间内的所有丢包。

问题4：如何判断NACK请求失败？

可以基于RTT(网络往返时间来进行判断)，同时为了避免频繁的NACK请求，也要设置重传的次数上限

## What do we need to do in Ldds?

1.目前的SenderID和SourceID需要细化，我们需要通过SenderID来直接获取IP地址进行UDP通信。

2.需要缓存一定的数据在内存，用于快速相应用户的NACK回补请求。

3.可以将实时请求产生的回补与文件扫描产生的回补分离开，用不同的NACK请求策略，同时也可以避免线程同步。

4.如何判断丢包？这一点可以参考Aeron的实现。